!function(o){"use strict";function t(){var t=o(window),e=o(window).height(),n=o(".sidebar--section"),s="js--scroll";t.width()>768&&n.children().each(function(){e<o(this).innerHeight()?o(this).parent().addClass(s):o(this).parent().removeClass(s)})}var e=o("body");o(".projects"),o(".site-header"),o(".formContainer"),o(".projects"),o("#site-search");o("body").fitVids(),NProgress.configure({minimum:.7,showSpinner:!1}),document.onreadystatechange=function(){"interactive"==document.readyState&&NProgress.start()};var n=setInterval(function(){/loaded|complete/.test(document.readyState)&&(clearInterval(n),setTimeout(function(){NProgress.done()},1e3))},10);o(document).ready(function(){function n(){o(".video-frame").fitVids()}function s(){u=!0,e.addClass("modal-open"),f.animate({scrollTop:0},300),f.addClass("modal--show"),m.addClass("loading--show"),h.addClass("modal-content--show")}function a(){u=!1,setTimeout(function(){h.html(""),d.removeClass("button--close--show"),h.removeClass("modal-content--show"),e.removeClass("modal-open"),f.css("-webkit-overflow-scrolling","auto"),f.removeClass("modal--show")},400)}function i(){m.removeClass("loading--show"),h.find(".type-portfolio").addClass("project--show"),d.addClass("button--close--show"),setTimeout(function(){f.css("-webkit-overflow-scrolling","touch")},300)}function l(t){o.get(t,function(t){o(t).find(".project");setTimeout(function(){i()},200)})}t(),n();var c=o(".projects"),r=document.getElementById("close-button"),d=o(r),u=!1,f=(o(".project"),o("#modal")),h=o("#modal-content"),m=o("#loading");o(".post-edit-link");o("#modal-close").on("click",function(){a()}),o("#close-button").on("click",function(){a()}),e.hasClass("modal-active")&&c.on("click",".project a",function(t){o(this).hasClass("project--link_external")||(t.preventDefault(),history.pushState(null,null,this.href),s(),l(o(this).attr("href")))}),e.hasClass("modal-active")&&o(".project a").click(function(t){if(!o(this).hasClass("project--link_external")){t.preventDefault(),o("#loading-body").show();var e=o(this).data("id"),n=mark_site.ajaxurl;o.ajax({type:"POST",url:n,data:{action:"load-content",post_id:e},success:function(t){return o("#modal-content").html(t),o("#loading-body").hide(),o(".project-assets").fitVids(),!1}})}}),o(".mobile-menu-toggle").on("click",function(){e.toggleClass("nav-open")}),o("#nav-close").on("click",function(){e.toggleClass("nav-open")})}),o(window).resize(function(){t()})}(jQuery);